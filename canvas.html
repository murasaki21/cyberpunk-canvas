<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <!-- js libraries -->
    <script src="https://code.createjs.com/1.0.0/easeljs.min.js"></script>
    <script language="javascript" type="text/javascript" src="../lib/p5.js"></script>
    <script language="javascript" src="../lib/p5.clickable.js"></script>
    <script language="javascript" src="../lib/scenemanager.js"></script>
    <script language="javascript" type="text/javascript" src="canvas.js"></script>
    <script language="javascript" type="text/javascript" src="sceneHost.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css"/>
  <!--bkgd stuff
    <style>
      body {
        background-image: url("images/light_canvas.png");
        background-repeat: no-repeat;
        background-size: cover;
      }
    </style>-->

    <title>Canvas</title>
  </head>

  <header>
    <iframe width="100%" height="100" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/272763982&color=%23211e17&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"></iframe><div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"></div>
    <br>

    <a href="index.html"> <button class="button indexButton">Home </button></a>
    <br>
    <br>
    <a href="canvas.html"> <button class="button indexButton">Refresh </button></a>
    <br>
    <br>
    <a href="darkCanvas.html"> <button class="button lightModeButton">Switch to Dark Mode </button></a>
  </header>

  <body>
    <script id="editable">
    	var canvas, stage;
    	var drawingCanvas;
    	var oldPt;
    	var oldMidPt;
    	var title;
    	var color;
    	var stroke;
    	var colors;
    	var index;

    	function init() {
    		canvas = document.getElementById("Canvas");
    		index = 0;
    		colors = ["white","#f848fe", "#ddadff","#ab12e2", "#4b08af", "#373fc4", "#4b8cfb", "#99B9FF"];

    		//check to see if we are running in a browser with touch support
    		stage = new createjs.Stage(canvas);
    		stage.autoClear = false;
    		stage.enableDOMEvents(true);

    		createjs.Touch.enable(stage);
    		createjs.Ticker.framerate = 24;

    		drawingCanvas = new createjs.Shape();

    		stage.addEventListener("stagemousedown", handleMouseDown);
    		stage.addEventListener("stagemouseup", handleMouseUp);

    		title = new createjs.Text("begin drawing", "36px Arial", "gray");
    		title.x = 650;
    		title.y = 200;
    		stage.addChild(title);

    		stage.addChild(drawingCanvas);
    		stage.update();
    	}

    	function handleMouseDown(event) {
    		if (!event.primary) { return; }
    		if (stage.contains(title)) {
    			stage.clear();
    			stage.removeChild(title);
    		}
    		color = colors[(index++) % colors.length];
    	  stroke = 10;
    		oldPt = new createjs.Point(stage.mouseX, stage.mouseY);
    		oldMidPt = oldPt.clone();
    		stage.addEventListener("stagemousemove", handleMouseMove);
    	}

    	function handleMouseMove(event) {
    		if (!event.primary) { return; }
    		var midPt = new createjs.Point(oldPt.x + stage.mouseX >> 1, oldPt.y + stage.mouseY >> 1);

    		drawingCanvas.graphics.clear().setStrokeStyle(stroke, 'square', 'square').beginStroke(color).moveTo(midPt.x, midPt.y).curveTo(oldPt.x, oldPt.y, oldMidPt.x, oldMidPt.y);

    		oldPt.x = stage.mouseX;
    		oldPt.y = stage.mouseY;

    		oldMidPt.x = midPt.x;
    		oldMidPt.y = midPt.y;

    		stage.update();
    	}

    	function handleMouseUp(event) {
    		if (!event.primary) { return; }
    		stage.removeEventListener("stagemousemove", handleMouseMove);
    	}
    </script>

    <body onload="init();">
    <canvas id="Canvas" width="1510" height="670"></canvas>
  </body>
</html>
